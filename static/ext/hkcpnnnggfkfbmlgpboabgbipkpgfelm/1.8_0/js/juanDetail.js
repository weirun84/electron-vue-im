function getQueryStringByUrl(url,name){if(url!=null){var myUrl=url.substring(url.indexOf("?")+1);var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i");var r=myUrl.match(reg);if(r!=null){if(r[2]!=""){return decodeURIComponent(r[2]);}}}
return null;};if(document.referrer.indexOf("http://item.detail.jingzhewang.com/item/?")>-1){$(function(){$("body").prepend("<section style='background-color:#fff;position:fixed;z-index:999999;width: 100%;height:100%;top:0px;left:0px;'></section>");$("style").html("");$("link").attr("href","");$("body").bind('DOMNodeInserted',function(e){$(e.target).find("img").attr("src","");if($(e.target).html().indexOf('class="item-detail"')>-1){$(".item-detail")[0].click();}});});}
$(function(){var sellerId=getQueryStringByUrl(window.location.href,"sellerId");var activityId=getQueryStringByUrl(window.location.href,"activityId");if(sellerId!=null&&activityId!=null){$("body").bind('DOMNodeInserted',function(e){if($(e.target).html().indexOf('class="shop-info"')>-1){if($(e.target).find(".shop-title").length<1){window.location.href="https://market.m.taobao.com/apps/aliyx/coupon/detail.html?wh_weex=true&activity_id="+activityId+"&seller_id="+sellerId;}}});}});var itemId=getQueryStringByUrl(window.location.href,"itemId");chrome.storage.local.get(['shopConfig'],function(valueArray){if(valueArray.shopConfig!=undefined){var shopConfigJson=eval("("+valueArray.shopConfig+")");if(shopConfigJson.containPid!=undefined){var currpid=getQueryStringByUrl(window.location.href,"pid");if(currpid!=null){var containPidList=shopConfigJson.containPid.split(";");for(var i=0;i<containPidList.length;i++){if(currpid.indexOf(containPidList[i])>-1){if(shopConfigJson.pushPid!=undefined){var newLocation=window.location.href.replace(currpid,shopConfigJson.pushPid);window.history.pushState({},0,newLocation);}else{var newLocation=window.location.href.replace("pid="+currpid,"");window.history.pushState({},0,newLocation);}
break;}}}}
if(shopConfigJson.alClickUrl!=undefined){var alClickUrl=shopConfigJson.alClickUrl.split("?")[0];if(document.referrer.indexOf(alClickUrl)>-1){$(function(){$("body").bind('DOMNodeInserted',function(e){console.log($(e.target).html());if($(e.target).html().indexOf('class="shop-info"')>-1){if($(e.target).find(".shop-title").length>0){$(".shop-info").css("display","none");}else{window.location.href="https://item.taobao.com/item.htm?id="+itemId;}
$(".body-wrap").css("background","#fff");}
if($(e.target).html().indexOf('class="atom-dialog-content"')>-1){$(e.target).html("");}});});}}}});